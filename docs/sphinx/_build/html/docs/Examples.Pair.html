

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Bell Pair Example &mdash; QDNS 0.55-stable documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Superdense Coding Example" href="Examples.Sdc.html" />
    <link rel="prev" title="Examples" href="Examples.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QDNS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design.html">Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hello.html">Hello QDNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Backend.html">Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quantum.html">Quantum Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hardware.html">Hardware Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sends.html">Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="App.html">Advanged Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Noise.html">Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="Qkd.html">QKD Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Attack.html">Eavesdropping</a></li>
<li class="toctree-l1"><a class="reference internal" href="Features.html">Result</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Examples.html">Examples</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="Examples.html#subpackages">Subpackages</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Bell Pair Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="Examples.Sdc.html">Superdense Coding Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="Examples.Qkd.html">QKD Example</a></li>
<li class="toctree-l3"><a class="reference internal" href="Examples.Eavesdropping.html">Eavesdropping to QKD Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QDNS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="Examples.html">Examples</a> &raquo;</li>
        
      <li>Bell Pair Example</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/docs/Examples.Pair.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="bell-pair-example">
<h1>Bell Pair Example<a class="headerlink" href="#bell-pair-example" title="Permalink to this headline">Â¶</a></h1>
<p>In this example, we generate bell pairs and send one qubit of pairs to Bob.
Then, Alice and Bob measures these qubits and put results to simulation results.
Then we calculate match rate over various connection distances.
First we need to import needed modules:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">QDNS</span>
<span class="kn">import</span> <span class="nn">logging</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">import</span> <span class="n">figure</span>
</pre></div>
</div>
<p>Now we need to create Alice node and program node to send entangle pairs to Bob:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Alice</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
<span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alice_default_app</span><span class="p">)</span>

<span class="nd">@staticmethod</span>
<span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">):</span>
    <span class="n">my_pairs</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">send_entangle_pairs</span><span class="p">(</span><span class="mi">512</span><span class="p">,</span> <span class="s2">&quot;Bob&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">my_pairs</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Something gone wrong on Alice side.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">measure_qubits</span><span class="p">(</span><span class="n">my_pairs</span><span class="p">)</span>
    <span class="n">app</span><span class="o">.</span><span class="n">put_simulation_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>Also we need to program Bob:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bob_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">bob_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">):</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">wait_next_qubits</span><span class="p">(</span><span class="mi">512</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob did not receive qubits.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">my_pairs</span><span class="p">,</span> <span class="n">count</span> <span class="o">=</span> <span class="n">op</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">op</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">measure_qubits</span><span class="p">(</span><span class="n">my_pairs</span><span class="p">)</span>
        <span class="n">app</span><span class="o">.</span><span class="n">put_simulation_result</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>Now we need a main function:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">length_</span><span class="p">):</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span><span class="p">,</span> <span class="n">bob</span> <span class="o">=</span> <span class="n">Alice</span><span class="p">(),</span> <span class="n">Bob</span><span class="p">()</span>
    <span class="n">net</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">,</span> <span class="n">length</span><span class="o">=</span><span class="n">length_</span><span class="p">)</span> <span class="c1">#km</span>

    <span class="c1"># Create configuration, we need 512x2 frames.</span>
    <span class="n">core_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">core_count</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">frames</span> <span class="o">=</span> <span class="p">{</span>
        <span class="mi">2</span><span class="p">:</span> <span class="p">{</span>
            <span class="mi">2</span><span class="p">:</span> <span class="nb">int</span><span class="p">(</span><span class="mi">600</span> <span class="o">/</span> <span class="n">core_count</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">backend_conf</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">BackendConfiguration</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">CIRQ_BACKEND</span><span class="p">,</span> <span class="n">core_count</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>

    <span class="c1"># Lets set all noises to 0 except channel error.</span>
    <span class="c1"># So we can measure impact of channel length more accurate.</span>
    <span class="n">my_noise</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">NoisePattern</span><span class="p">(</span>
        <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span>
        <span class="n">sp_channel</span><span class="o">=</span><span class="n">QDNS</span><span class="o">.</span><span class="n">depolarisation_channel</span><span class="p">,</span>
        <span class="n">measure_channel</span><span class="o">=</span><span class="n">QDNS</span><span class="o">.</span><span class="n">bit_and_phase_flip_channel</span><span class="p">,</span>
        <span class="n">gate_channel</span><span class="o">=</span><span class="n">QDNS</span><span class="o">.</span><span class="n">phase_flip_channel</span><span class="p">,</span>
        <span class="n">scramble_channel</span><span class="o">=</span><span class="n">QDNS</span><span class="o">.</span><span class="n">depolarisation_channel</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">sim</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Simulator</span><span class="p">()</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">backend_conf</span><span class="p">,</span> <span class="n">my_noise</span><span class="p">)</span>

    <span class="c1"># Grap results from Alice and Bob.</span>
    <span class="n">alice_res</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">user_dumpings</span><span class="p">(</span><span class="n">alice</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">DEFAULT_APPLICATION_NAME</span><span class="p">)</span>
    <span class="n">bob_res</span> <span class="o">=</span> <span class="n">results</span><span class="o">.</span><span class="n">user_dumpings</span><span class="p">(</span><span class="n">bob</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">DEFAULT_APPLICATION_NAME</span><span class="p">)</span>

    <span class="n">Check</span> <span class="n">match</span><span class="o">.</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">alice_res</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()):</span>
        <span class="k">if</span> <span class="n">alice_res</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="n">bob_res</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="n">rate</span> <span class="o">=</span> <span class="n">count</span> <span class="o">/</span> <span class="n">alice_res</span><span class="o">.</span><span class="fm">__len__</span><span class="p">()</span> <span class="o">*</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">rate</span>
</pre></div>
</div>
<p>Lets loop main() function in different lengths:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">run_more</span><span class="p">():</span>
    <span class="n">results</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="n">lengths</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">5</span><span class="p">):</span>
        <span class="n">lengths</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">rate</span> <span class="o">=</span> <span class="n">main</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
        <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">rate</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">lengths</span><span class="p">,</span> <span class="n">results</span>
</pre></div>
</div>
<p>Now we need to plot data:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">plot_x</span><span class="p">,</span> <span class="n">plot_y</span> <span class="o">=</span> <span class="n">run_more</span><span class="p">()</span>
    <span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">80</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;EPR pair measure match rate over distance&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">plot_x</span><span class="p">,</span> <span class="n">plot_y</span><span class="p">,</span> <span class="s1">&#39;go--&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s2">&quot;Distance(km)&quot;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s2">&quot;Match rate(%)&quot;</span><span class="p">)</span>
</pre></div>
</div>
<img alt="alternate text" class="align-left" src="../_images/bell_example.png" />
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Examples.Sdc.html" class="btn btn-neutral float-right" title="Superdense Coding Example" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Examples.html" class="btn btn-neutral float-left" title="Examples" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, COMU Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>