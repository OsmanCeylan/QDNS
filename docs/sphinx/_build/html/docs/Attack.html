

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Eavesdropping &mdash; QDNS 0.55-stable documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Result" href="Features.html" />
    <link rel="prev" title="QKD Layer" href="Qkd.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> QDNS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design.html">Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hello.html">Hello QDNS</a></li>
<li class="toctree-l1"><a class="reference internal" href="Backend.html">Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quantum.html">Quantum Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hardware.html">Hardware Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sends.html">Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="App.html">Advanged Applications</a></li>
<li class="toctree-l1"><a class="reference internal" href="Noise.html">Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="Qkd.html">QKD Layer</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Eavesdropping</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#undetected-observer">Undetected Observer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#observer-application">Observer Application</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grabbing-the-traffic">Grabbing the Traffic</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Features.html">Result</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QDNS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Eavesdropping</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/docs/Attack.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <section id="eavesdropping">
<h1>Eavesdropping<a class="headerlink" href="#eavesdropping" title="Permalink to this headline">¶</a></h1>
<p>QDNS provides user convenience to run network attacks. By routing ping packets, observer devices can easily infiltrate the network.
QDNS tries to abstracts the complexity of observe process and lets users to focus application.</p>
<section id="undetected-observer">
<h2>Undetected Observer<a class="headerlink" href="#undetected-observer" title="Permalink to this headline">¶</a></h2>
<p>In the example below there is an observer between Alice and Bob:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">QDNS</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">Alice</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alice_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="n">connection_info</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">reveal_connectivity_information</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Alice Conn: &quot;</span><span class="p">,</span> <span class="n">connection_info</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bob_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">bob_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="n">connection_info</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">reveal_connectivity_information</span><span class="p">()</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob Conn: &quot;</span><span class="p">,</span> <span class="n">connection_info</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span> <span class="o">=</span> <span class="n">Alice</span><span class="p">()</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span>
    <span class="n">eve</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Observer</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">)</span>

    <span class="n">net</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>

    <span class="c1"># Add eve between them.</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">eve</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>

    <span class="n">frames</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">}}</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">BackendConfiguration</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">CIRQ_BACKEND</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>
    <span class="n">sim</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Simulator</span><span class="p">()</span>
    <span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">Alice</span> <span class="n">Conn</span><span class="p">:</span>
<span class="n">Classic</span> <span class="n">UUIDs</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;XLITMGL21EOM1ONR&#39;</span><span class="p">]</span>
<span class="n">Quantum</span> <span class="n">UUIDs</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;QLVPYP5NS0MA8UXH&#39;</span><span class="p">]</span>
<span class="n">Classic</span> <span class="n">Targets</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">]</span>
<span class="n">Quantum</span> <span class="n">Targets</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">]</span>
<span class="n">Communication</span> <span class="n">State</span><span class="p">:</span> <span class="kc">True</span>

<span class="n">Bob</span> <span class="n">Conn</span><span class="p">:</span>
<span class="n">Classic</span> <span class="n">UUIDs</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;WMI16GBB1JJO6D47&#39;</span><span class="p">]</span>
<span class="n">Quantum</span> <span class="n">UUIDs</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;86WV8DZT4RUGO4O8&#39;</span><span class="p">]</span>
<span class="n">Classic</span> <span class="n">Targets</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">]</span>
<span class="n">Quantum</span> <span class="n">Targets</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Alice&#39;</span><span class="p">]</span>
<span class="n">Communication</span> <span class="n">State</span><span class="p">:</span> <span class="kc">True</span>
</pre></div>
</div>
<p>As can be seen above, Alice and Bob cannot detect Eve.</p>
</section>
<section id="observer-application">
<h2>Observer Application<a class="headerlink" href="#observer-application" title="Permalink to this headline">¶</a></h2>
<p>Observer device can have only one application, the default application.
But still can access all traffic on its device regardless of destination application of package.
An observer device can defined as following:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">Eve</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Observer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eve_app</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">eve_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="c1"># Listens the traffic on Eve node in loop.</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">communication</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">get_communication_item</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">communication</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>

            <span class="c1"># Do whatever you want there about item.</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">print_item</span><span class="p">(</span><span class="n">communication</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Eve listening is over.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The following example shows a use case:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">QDNS</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">Alice</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alice_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

        <span class="c1"># Send message to Bob.</span>
        <span class="n">default_app</span><span class="o">.</span><span class="n">send_classic_data</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bob_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">bob_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="n">package</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">wait_next_package</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob prints: &quot;</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Eve</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Observer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eve_app</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">eve_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">communication</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">get_communication_item</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">communication</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">print_item</span><span class="p">(</span><span class="n">communication</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Eve listening is over.&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span> <span class="o">=</span> <span class="n">Alice</span><span class="p">()</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span>
    <span class="n">eve</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Observer</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">)</span>

    <span class="n">net</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">eve</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>

    <span class="n">frames</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">}}</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">BackendConfiguration</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">CIRQ_BACKEND</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>
    <span class="n">sim</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Simulator</span><span class="p">()</span>
    <span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">WARNING</span><span class="p">:</span><span class="n">QDNS</span><span class="p">::</span><span class="n">Kernel</span><span class="p">::</span><span class="n">Backend</span><span class="p">:</span><span class="n">CIRQ</span> <span class="n">backend</span> <span class="ow">is</span> <span class="n">prepaired</span> <span class="k">for</span> <span class="n">simulation</span><span class="o">.</span> <span class="n">Prepairation</span> <span class="n">time</span><span class="p">:</span> <span class="o">~</span><span class="mf">0.1115</span> <span class="n">sec</span>

<span class="o">---------------</span>
<span class="n">Traffic</span> <span class="n">on</span> <span class="n">device</span><span class="p">:</span>  <span class="n">Eve</span>
<span class="n">TYPE</span><span class="p">:</span> <span class="n">CLASSIC</span> <span class="n">DATA</span>
<span class="n">SENDER</span><span class="p">:</span>  <span class="n">Alice</span>
<span class="n">RECEIVER</span><span class="p">:</span>  <span class="n">Bob</span>
<span class="n">APP</span> <span class="n">Label</span><span class="p">:</span>  <span class="n">default_app</span>
<span class="n">Broadcast</span><span class="p">:</span>  <span class="kc">False</span>
<span class="n">Data</span><span class="p">:</span>  <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

<span class="n">Bob</span> <span class="n">prints</span><span class="p">:</span>  <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

<span class="n">WARNING</span><span class="p">:</span><span class="n">QDNS</span><span class="p">::</span><span class="n">Alice</span><span class="p">:</span><span class="n">Device</span> <span class="n">simulation</span> <span class="ow">is</span> <span class="n">idled</span> <span class="n">after</span> <span class="mf">1.0013</span> <span class="n">seconds</span><span class="o">.</span>
<span class="n">WARNING</span><span class="p">:</span><span class="n">QDNS</span><span class="p">::</span><span class="n">Bob</span><span class="p">:</span><span class="n">Device</span> <span class="n">simulation</span> <span class="ow">is</span> <span class="n">idled</span> <span class="n">after</span> <span class="mf">1.0019</span> <span class="n">seconds</span><span class="o">.</span>
<span class="n">WARNING</span><span class="p">:</span><span class="n">QDNS</span><span class="p">::</span><span class="n">Eve</span><span class="p">:</span><span class="n">Device</span> <span class="n">simulation</span> <span class="ow">is</span> <span class="n">idled</span> <span class="n">after</span> <span class="mf">1.0018</span> <span class="n">seconds</span><span class="o">.</span>
<span class="n">WARNING</span><span class="p">:</span><span class="n">QDNS</span><span class="p">::</span><span class="n">Kernel</span><span class="p">:</span><span class="n">Simulation</span> <span class="ow">is</span> <span class="n">ended</span> <span class="ow">in</span> <span class="mf">1.5033</span> <span class="n">seconds</span><span class="o">.</span> <span class="n">Real</span> <span class="n">raw</span> <span class="n">time</span><span class="p">:</span> <span class="mf">0.0086</span>
</pre></div>
</div>
</section>
<section id="grabbing-the-traffic">
<h2>Grabbing the Traffic<a class="headerlink" href="#grabbing-the-traffic" title="Permalink to this headline">¶</a></h2>
<p>QDNS also allows users to capture traffic on observer devices. Thus, the listener can filter the traffic.
In the example below, Alice sends a message and qubit to Bob but Eve will block qubit with using
<code class="xref any docutils literal notranslate"><span class="pre">app.listener.set_interrupt(True)</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">QDNS</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">class</span> <span class="nc">Alice</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">alice_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">):</span>
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

        <span class="c1"># Send message to Bob.</span>
        <span class="n">default_app</span><span class="o">.</span><span class="n">send_classic_data</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">message</span><span class="p">)</span>

        <span class="c1"># Send bob a qubit.</span>
        <span class="n">qubit</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">allocate_qubit</span><span class="p">()</span>
        <span class="n">default_app</span><span class="o">.</span><span class="n">send_quantum</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">,</span> <span class="n">qubit</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Bob</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">bob_default_app</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">bob_default_app</span><span class="p">(</span><span class="n">default_app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">):</span>
        <span class="c1"># Wait for package.</span>
        <span class="n">package</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">wait_next_package</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">package</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob did not received package.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob prints: &quot;</span><span class="p">,</span> <span class="n">package</span><span class="o">.</span><span class="n">data</span><span class="p">)</span>

        <span class="c1"># Wait for qubit.</span>
        <span class="n">op</span> <span class="o">=</span> <span class="n">default_app</span><span class="o">.</span><span class="n">wait_next_qubit</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">op</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Bob did not receive qubit.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Qubit: &quot;</span><span class="p">,</span> <span class="n">op</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">Eve</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">Observer</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="s2">&quot;Eve&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">eve_app</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">delayed_start_time</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

    <span class="nd">@staticmethod</span>
    <span class="k">def</span> <span class="nf">eve_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">):</span>
        <span class="c1"># Set listener interrupt mode.</span>
        <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">set_interrupt</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>

        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
            <span class="n">communication</span> <span class="o">=</span> <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">get_communication_item</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">communication</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">print_item</span><span class="p">(</span><span class="n">communication</span><span class="p">)</span>

            <span class="c1"># Releases the packages on traffic.</span>
            <span class="c1"># Drops the qubits on traffic.</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">communication</span><span class="p">,</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Package</span><span class="p">):</span>
                <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">release_item</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">app</span><span class="o">.</span><span class="n">listener</span><span class="o">.</span><span class="n">drop_item</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Eve listening is over.&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span> <span class="o">=</span> <span class="n">Alice</span><span class="p">()</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">Bob</span><span class="p">()</span>
    <span class="n">eve</span> <span class="o">=</span> <span class="n">Eve</span><span class="p">()</span>

    <span class="n">net</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>

    <span class="c1"># Add eve between them.</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">eve</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">eve</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>

    <span class="n">frames</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">:</span> <span class="p">{</span><span class="mi">1</span><span class="p">:</span> <span class="mi">1</span><span class="p">}}</span>
    <span class="n">conf</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">BackendConfiguration</span><span class="p">(</span><span class="n">QDNS</span><span class="o">.</span><span class="n">CIRQ_BACKEND</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">frames</span><span class="p">)</span>
    <span class="n">sim</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Simulator</span><span class="p">()</span>
    <span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">net</span><span class="p">,</span> <span class="n">conf</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="o">---------------</span>
<span class="n">Traffic</span> <span class="n">on</span> <span class="n">device</span><span class="p">:</span>  <span class="n">Eve</span>
<span class="n">TYPE</span><span class="p">:</span> <span class="n">CLASSIC</span> <span class="n">DATA</span>
<span class="n">SENDER</span><span class="p">:</span>  <span class="n">Alice</span>
<span class="n">RECEIVER</span><span class="p">:</span>  <span class="n">Bob</span>
<span class="n">APP</span> <span class="n">Label</span><span class="p">:</span>  <span class="n">default_app</span>
<span class="n">Broadcast</span><span class="p">:</span>  <span class="kc">False</span>
<span class="n">Data</span><span class="p">:</span>  <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

<span class="n">Bob</span> <span class="n">prints</span><span class="p">:</span> <span class="s2">&quot;Hello Bob! I hope no one will read this message.&quot;</span>

<span class="o">---------------</span>
<span class="n">Traffic</span> <span class="n">on</span> <span class="n">device</span><span class="p">:</span> <span class="n">Eve</span>

<span class="n">TYPE</span><span class="p">:</span> <span class="n">QUANTUM</span> <span class="n">DATA</span>
<span class="n">SENDER</span><span class="p">:</span>  <span class="n">Alice</span>
<span class="n">RECEIVER</span><span class="p">:</span>  <span class="n">Bob</span>
<span class="n">APP</span> <span class="n">Label</span><span class="p">:</span>  <span class="n">default_app</span>
<span class="n">Broadcast</span><span class="p">:</span>  <span class="kc">False</span>
<span class="n">Qubits</span><span class="p">:</span>  <span class="p">(</span><span class="s1">&#39;1020000000&#39;</span><span class="p">,)</span>

<span class="n">Bob</span> <span class="n">did</span> <span class="ow">not</span> <span class="n">receive</span> <span class="n">qubit</span><span class="o">.</span>
</pre></div>
</div>
<p>As can seen above, Bob did not receive the qubit because Eve dropped the qubit with using its listener module.
<code class="docutils literal notranslate"><span class="pre">All</span> <span class="pre">devices</span> <span class="pre">have</span> <span class="pre">listener</span> <span class="pre">moudle</span> <span class="pre">but</span> <span class="pre">only</span> <span class="pre">observer</span> <span class="pre">devices</span> <span class="pre">can</span> <span class="pre">use</span> <span class="pre">listener</span> <span class="pre">module.</span></code></p>
</section>
</section>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="Features.html" class="btn btn-neutral float-right" title="Result" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="Qkd.html" class="btn btn-neutral float-left" title="QKD Layer" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, COMU Team.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>