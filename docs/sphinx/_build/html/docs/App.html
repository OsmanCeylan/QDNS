

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Application Writing &mdash; QDNS 0.51 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="../genindex.html"/>
        <link rel="search" title="Search" href="../search.html"/>
    <link rel="top" title="QDNS 0.51 documentation" href="../index.html"/>
        <link rel="next" title="Hardware Control" href="Hardware.html"/>
        <link rel="prev" title="Hello QDNS" href="Hello.html"/> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> QDNS
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Install.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="Design.html">Design Principles</a></li>
<li class="toctree-l1"><a class="reference internal" href="Hello.html">Hello QDNS</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Application Writing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-App.multi">Multi Application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#create-new-application">Create new application</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-App.app_method">Application method</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Hardware.html">Hardware Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="Quantum.html">Quantum Operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="Backend.html">Backends</a></li>
<li class="toctree-l1"><a class="reference internal" href="Sends.html">Communication</a></li>
<li class="toctree-l1"><a class="reference internal" href="Noise.html">Noise</a></li>
<li class="toctree-l1"><a class="reference internal" href="Qkd.html">QKD Layer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Attack.html">Eavesdropping</a></li>
<li class="toctree-l1"><a class="reference internal" href="Features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="Examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="Modules.html">Modules References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">QDNS</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Application Writing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/docs/App.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="application-writing">
<h1>Application Writing<a class="headerlink" href="#application-writing" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-App.multi">
<span id="multi-application"></span><h2>Multi Application<a class="headerlink" href="#module-App.multi" title="Permalink to this headline">¶</a></h2>
<p>QDNS allows multiple applications to run on one device at same time.
With this design, one application can run a protocol with a target device, while another application in same device can run a different protocol with any device it is connected to.</p>
<img alt="alternate text" class="align-left" src="../_images/mult.png" />
<span class="target" id="module-App.multi_after"></span><p>We need to create more applications along side to default application to enable this design.
Creating Alice applications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="c1"># Using localhost queue</span>
    <span class="n">app</span><span class="o">.</span><span class="n">put_localhost</span><span class="p">(</span><span class="s2">&quot;Hello second application!&quot;</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">alice_second_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">localhost_queue</span><span class="o">.</span><span class="n">get</span><span class="p">())</span>
</pre></div>
</div>
<p>Creating Bob applications:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">bob_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This application is </span><span class="si">{}</span><span class="s2"> and hosted in </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">app</span><span class="o">.</span><span class="n">host_label</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">bob_second_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;This application is </span><span class="si">{}</span><span class="s2"> and hosted in </span><span class="si">{}</span><span class="s2">.&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">label</span><span class="p">,</span> <span class="n">app</span><span class="o">.</span><span class="n">host_label</span><span class="p">))</span>
</pre></div>
</div>
<p>Application creation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>

    <span class="c1"># Default apps.</span>
    <span class="n">alice</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="n">alice_default_app</span><span class="p">)</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="n">bob_default_app</span><span class="p">)</span>

    <span class="c1"># Sencondary apps.</span>
    <span class="n">alice</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="n">alice_second_app</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;second&#39;</span><span class="p">)</span>
    <span class="n">bob</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="n">bob_second_app</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;second&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="create-new-application">
<h3>Create new application<a class="headerlink" href="#create-new-application" title="Permalink to this headline">¶</a></h3>
<dl class="py function">
<dt id="App.multi_after.create_new_application">
<code class="sig-prename descclassname"><span class="pre">App.multi_after.</span></code><code class="sig-name descname"><span class="pre">create_new_application</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">function</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">static</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">enabled</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_device_if_terminated</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bond_end_with_device</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delayed_start_time</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/App/multi_after.html#create_new_application"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#App.multi_after.create_new_application" title="Permalink to this definition">¶</a></dt>
<dd><p>The complete function of create_new_application()</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>function</strong> – Function of application.</p></li>
<li><p><strong>*args</strong> – User arguments to pass simulation.</p></li>
<li><p><strong>label</strong> – Label of application, default is “default”.</p></li>
<li><p><strong>static</strong> – Setts application static.</p></li>
<li><p><strong>enabled</strong> – Setts application enabled.</p></li>
<li><p><strong>end_device_if_terminated</strong> – Ends device simulation if application is termiated.</p></li>
<li><p><strong>bond_end_with_device</strong> – Ends device simulation if application is finished.</p></li>
<li><p><strong>delayed_start_time</strong> – Starts application after delay.</p></li>
</ul>
</dd>
</dl>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="s2">&quot;function: bob_run&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="s2">&quot;function: alice_run&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s2">&quot;alice_app&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="s2">&quot;function: bob_run&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">static</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">self</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="s2">&quot;function: bob_run&quot;</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">enabled</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>See QDNS/device/application.Application() for more details.</p>
<dl class="field-list simple">
<dt class="field-odd">Raises</dt>
<dd class="field-odd"><p><strong>ValueError</strong> – Same name application in device.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Application or None.</p>
</dd>
</dl>
</dd></dl>

</div>
</div>
<div class="section" id="module-App.app_method">
<span id="application-method"></span><h2>Application method<a class="headerlink" href="#module-App.app_method" title="Permalink to this headline">¶</a></h2>
<p>Assume a application method that linked to device and ready to simulation like below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>Parameter “app” refers to the current application in this scope. And <a href="#id1"><span class="problematic" id="id2">*</span></a>user_args is the arguments passed from the creation of application by user before the simulation.
Most of the usefull functions is embeded to application class. Some have an easy job, while others do more complex operations. So most operations returns a dictionary with exit code.</p>
<p>Lets look device, connection and port information on application:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">QDNS</span>
<span class="kn">import</span> <span class="nn">logging</span>

<span class="k">def</span> <span class="nf">alice_default_app</span><span class="p">(</span><span class="n">app</span><span class="p">:</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Application</span><span class="p">,</span> <span class="o">*</span><span class="n">user_args</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">reveal_device_information</span><span class="p">())</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">reveal_connection_information</span><span class="p">(</span><span class="n">get_uuids</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">app</span><span class="o">.</span><span class="n">reveal_port_information</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">search_classic</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>

<span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
    <span class="n">logging</span><span class="o">.</span><span class="n">basicConfig</span><span class="p">(</span><span class="n">level</span><span class="o">=</span><span class="n">logging</span><span class="o">.</span><span class="n">WARNING</span><span class="p">)</span>

    <span class="n">alice</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Alice&quot;</span><span class="p">)</span>
    <span class="n">bob</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Node</span><span class="p">(</span><span class="s2">&quot;Bob&quot;</span><span class="p">)</span>

    <span class="n">alice</span><span class="o">.</span><span class="n">create_new_application</span><span class="p">(</span><span class="n">alice_default_app</span><span class="p">)</span>

    <span class="n">net</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>
    <span class="n">net</span><span class="o">.</span><span class="n">add_channels</span><span class="p">(</span><span class="n">alice</span><span class="p">,</span> <span class="n">bob</span><span class="p">)</span>

    <span class="n">sim</span> <span class="o">=</span> <span class="n">QDNS</span><span class="o">.</span><span class="n">Simulator</span><span class="p">()</span>
    <span class="n">res</span> <span class="o">=</span> <span class="n">sim</span><span class="o">.</span><span class="n">simulate</span><span class="p">(</span><span class="n">net</span><span class="p">)</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;exit_code&#39;</span><span class="p">:</span> <span class="mi">20</span><span class="p">,</span> <span class="s1">&#39;device_label&#39;</span><span class="p">:</span> <span class="s1">&#39;Alice&#39;</span><span class="p">,</span> <span class="s1">&#39;device_unique_id&#39;</span><span class="p">:</span> <span class="n">UUID</span><span class="p">(</span><span class="s1">&#39;d7f341dc-8661-4077-9df0-8495af0556db&#39;</span><span class="p">)}</span>
<span class="p">{</span><span class="s1">&#39;exit_code&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="s1">&#39;classic_connections_group&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">],</span> <span class="s1">&#39;quantum_connections_group&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;Bob&#39;</span><span class="p">]}</span>
<span class="p">{</span><span class="s1">&#39;exit_code&#39;</span><span class="p">:</span> <span class="mi">40</span><span class="p">,</span> <span class="s1">&#39;index&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Classic port type&#39;</span><span class="p">,</span> <span class="s1">&#39;active&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;connected&#39;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span> <span class="s1">&#39;channel_id&#39;</span><span class="p">:</span> <span class="s1">&#39;AS2L82LIWOE59D09&#39;</span><span class="p">,</span> <span class="s1">&#39;target&#39;</span><span class="p">:</span> <span class="s1">&#39;Bob&#39;</span><span class="p">,</span> <span class="s1">&#39;latency&#39;</span><span class="p">:</span> <span class="mf">0.00017</span>
</pre></div>
</div>
<p>As can be seen above, many methods embedded in the application class returns a dictionary containing an exit code. Positive exit codes means operation is successful.</p>
<p>As we continue, we will describe the important methods in application class.</p>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="Hardware.html" class="btn btn-neutral float-right" title="Hardware Control" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="Hello.html" class="btn btn-neutral" title="Hello QDNS" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2021, COMU Team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> and ❤️  using a custom <a href="https://github.com/LinxiFan/Stanford-theme">theme</a> based on <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.51',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>